# nw-node-gyp-example

Build NW.js Node Addons using `node-gyp`.

## Getting Started with demo application

1. Clone repo
2. `npm i` to install dependencies
3. `npm run rebuild` to download `nw-headers`, `node.lib`, `nw.lib` and build NW.js Node Native Addon
4. `npm run nw` to run NW.js app.

## Approach

If the NW.js's version is 0.99.0:

1. Download NW.js Node headers tarball:
https://dl.nwjs.io/v0.99.0/nw-headers-v0.99.0.tar.gz
Extract `nw-headers-v0.99.0.tar.gz` to `./node/`.
2. Download `node.lib` and `nw.lib`:
http://node-webkit.s3.amazonaws.com/v0.99.0/x64/node.lib
http://node-webkit.s3.amazonaws.com/v0.99.0/x64/nw.lib
Copy `node.lib` and `nw.lib` to `./node/Release/`.
3. Get the Node version used by the NW.js release version:
https://nwjs.io/versions.json
For `v0.99.0` the Node version is `23.10.0`
(Re)build Node addons for NW.js:
`node-gyp rebuild --target=23.10.0 --arch=x64 --nodedir=/path/to/node/headers/directory`
4. If the `target_name` value in your `binding.gyp` file is `hello`, the compiled addon will be at:
`./build/Release/hello.node`.
5. Import the module inside your application:
`const hello = require('./build/Release/hello.node');`

```
addon
├── binding.gyp                  (target_name: "hello")
├── hello.cc
├── nw-headers-v0.99.0.tar.gz    (1.1 downloaded from https://dl.nwjs.io)
├── node                         (1.2 extracted from `nw-headers-v0.99.0.tar.gz`)
│   └── Release
│       ├── node.lib             (2.1 downloaded from http://node-webkit.s3.amazonaws.com)
│       └── nw.lib               (2.2 downloaded from http://node-webkit.s3.amazonaws.com)
└── build                        (3   generated by `node-gyp rebuild`)
    └── Release
        └── hello.node           (4   compiled addon √)
```
